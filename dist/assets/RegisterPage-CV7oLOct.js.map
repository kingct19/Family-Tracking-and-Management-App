{"version":3,"file":"RegisterPage-CV7oLOct.js","sources":["../../src/features/auth/components/RegisterForm.tsx","../../src/features/auth/pages/RegisterPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/Button';\nimport { TextField } from '@/components/ui/TextField';\nimport { useAuth } from '../hooks/useAuth';\nimport { registerSchema, type RegisterFormData } from '@/lib/validation/auth-schemas';\nimport { toast } from 'react-hot-toast';\nimport { FiMail, FiLock, FiUser } from 'react-icons/fi';\n\nexport const RegisterForm = () => {\n    const navigate = useNavigate();\n    const { register: registerUser, isRegistering, isAuthenticated } = useAuth();\n    const [formData, setFormData] = useState<RegisterFormData>({\n        email: '',\n        displayName: '',\n        password: '',\n        confirmPassword: '',\n        acceptTerms: false,\n    });\n    const [errors, setErrors] = useState<Partial<Record<keyof RegisterFormData, string>>>({});\n    const [registerSuccess, setRegisterSuccess] = useState(false);\n\n    // Redirect when auth state updates after successful registration\n    useEffect(() => {\n        if (registerSuccess && isAuthenticated) {\n            navigate('/map', { replace: true });\n            setRegisterSuccess(false);\n        }\n    }, [registerSuccess, isAuthenticated, navigate]);\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setErrors({});\n\n        // Validate form data\n        const result = registerSchema.safeParse(formData);\n        if (!result.success) {\n            const fieldErrors: Partial<Record<keyof RegisterFormData, string>> = {};\n            result.error.errors.forEach((err) => {\n                if (err.path[0]) {\n                    fieldErrors[err.path[0] as keyof RegisterFormData] = err.message;\n                }\n            });\n            setErrors(fieldErrors);\n            return;\n        }\n\n        try {\n            const response = await registerUser(formData);\n\n            if (response.success) {\n                toast.success('Account created successfully!');\n                // Set flag to trigger redirect when auth state updates\n                setRegisterSuccess(true);\n                // Auth state listener will handle the redirect via useEffect above\n            } else {\n                toast.error(response.error || 'Registration failed');\n            }\n        } catch (error) {\n            toast.error('An unexpected error occurred');\n        }\n    };\n\n    const handleChange = (field: keyof RegisterFormData) => (\n        e: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setFormData((prev) => ({\n            ...prev,\n            [field]: e.target.type === 'checkbox' ? e.target.checked : e.target.value,\n        }));\n\n        // Clear error for this field\n        if (errors[field]) {\n            setErrors((prev) => ({ ...prev, [field]: undefined }));\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6 w-full max-w-md\">\n            <TextField\n                type=\"text\"\n                label=\"Full name\"\n                value={formData.displayName}\n                onChange={handleChange('displayName')}\n                error={errors.displayName}\n                startAdornment={<FiUser size={20} />}\n                fullWidth\n                required\n                autoComplete=\"name\"\n                disabled={isRegistering}\n            />\n\n            <TextField\n                type=\"email\"\n                label=\"Email\"\n                value={formData.email}\n                onChange={handleChange('email')}\n                error={errors.email}\n                startAdornment={<FiMail size={20} />}\n                fullWidth\n                required\n                autoComplete=\"email\"\n                disabled={isRegistering}\n            />\n\n            <TextField\n                type=\"password\"\n                label=\"Password\"\n                value={formData.password}\n                onChange={handleChange('password')}\n                error={errors.password}\n                startAdornment={<FiLock size={20} />}\n                helperText=\"At least 8 characters with uppercase, lowercase, and number\"\n                fullWidth\n                required\n                autoComplete=\"new-password\"\n                disabled={isRegistering}\n            />\n\n            <TextField\n                type=\"password\"\n                label=\"Confirm password\"\n                value={formData.confirmPassword}\n                onChange={handleChange('confirmPassword')}\n                error={errors.confirmPassword}\n                startAdornment={<FiLock size={20} />}\n                fullWidth\n                required\n                autoComplete=\"new-password\"\n                disabled={isRegistering}\n            />\n\n            <div className=\"space-y-2\">\n                <label className=\"flex items-start gap-3 cursor-pointer\">\n                    <input\n                        type=\"checkbox\"\n                        checked={formData.acceptTerms}\n                        onChange={handleChange('acceptTerms')}\n                        className=\"w-5 h-5 mt-0.5 rounded border-outline text-primary focus:ring-2 focus:ring-primary flex-shrink-0\"\n                        disabled={isRegistering}\n                    />\n                    <span className=\"text-body-sm text-on-surface\">\n                        I agree to the{' '}\n                        <button\n                            type=\"button\"\n                            className=\"text-primary hover:underline\"\n                            onClick={() => window.open('/terms', '_blank')}\n                        >\n                            Terms of Service\n                        </button>{' '}\n                        and{' '}\n                        <button\n                            type=\"button\"\n                            className=\"text-primary hover:underline\"\n                            onClick={() => window.open('/privacy', '_blank')}\n                        >\n                            Privacy Policy\n                        </button>\n                    </span>\n                </label>\n                {errors.acceptTerms && (\n                    <p className=\"text-label-sm text-error ml-8\">{errors.acceptTerms}</p>\n                )}\n            </div>\n\n            <Button\n                type=\"submit\"\n                variant=\"filled\"\n                size=\"large\"\n                fullWidth\n                loading={isRegistering}\n                disabled={isRegistering}\n            >\n                Create account\n            </Button>\n\n            <div className=\"text-center\">\n                <span className=\"text-body-md text-on-variant\">Already have an account? </span>\n                <button\n                    type=\"button\"\n                    onClick={() => navigate('/login')}\n                    className=\"text-body-md text-primary hover:underline font-semibold\"\n                    disabled={isRegistering}\n                >\n                    Sign in\n                </button>\n            </div>\n        </form>\n    );\n};\n\n","import { Helmet } from 'react-helmet-async';\nimport { Link } from 'react-router-dom';\nimport { RegisterForm } from '../components/RegisterForm';\nimport { FiMapPin, FiUsers, FiCheckCircle, FiZap } from 'react-icons/fi';\n\nconst RegisterPage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Create Account Â· HaloHub</title>\n                <meta name=\"description\" content=\"Create a new HaloHub account\" />\n            </Helmet>\n\n            <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4\">\n                <div className=\"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center\">\n                    {/* Left side - Registration Form */}\n                    <div className=\"w-full order-2 lg:order-1\">\n                        <div className=\"bg-white rounded-3xl shadow-2xl p-8 md:p-12\">\n                            {/* Mobile Logo */}\n                            <div className=\"lg:hidden flex items-center justify-center gap-3 mb-8\">\n                                <div className=\"w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center\">\n                                    <FiMapPin size={24} className=\"text-white\" />\n                                </div>\n                                <h2 className=\"text-2xl font-bold text-gray-900\">HaloHub</h2>\n                            </div>\n\n                            <div className=\"text-center mb-8\">\n                                <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-3\">\n                                    Get started free\n                                </h1>\n                                <p className=\"text-lg text-gray-600\">\n                                    Create your account to begin coordinating with your group\n                                </p>\n                            </div>\n\n                            <RegisterForm />\n\n                            <div className=\"mt-8 pt-8 border-t border-gray-200\">\n                                <p className=\"text-center text-sm text-gray-500\">\n                                    By signing up, you agree to our Terms of Service and Privacy Policy\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Right side - Benefits */}\n                    <div className=\"order-1 lg:order-2\">\n                        <div className=\"space-y-6\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"w-16 h-16 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-xl\">\n                                    <FiMapPin size={32} className=\"text-white\" />\n                                </div>\n                                <h2 className=\"text-4xl font-bold text-gray-900\">HaloHub</h2>\n                            </div>\n\n                            <h3 className=\"text-3xl font-bold text-gray-900 leading-tight\">\n                                Everything you need to keep your family safe and organized\n                            </h3>\n\n                            <p className=\"text-xl text-gray-600\">\n                                Join thousands of groups using our platform for real-time coordination\n                                and peace of mind.\n                            </p>\n\n                            <div className=\"space-y-4 pt-6\">\n                                <div className=\"flex items-start gap-4\">\n                                    <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                                        <FiCheckCircle size={24} className=\"text-green-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Free to start</h4>\n                                        <p className=\"text-gray-600\">No credit card required. Start coordinating today.</p>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-start gap-4\">\n                                    <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                                        <FiUsers size={24} className=\"text-purple-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Unlimited members</h4>\n                                        <p className=\"text-gray-600\">Add as many group members as you need</p>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-start gap-4\">\n                                    <div className=\"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                                        <FiZap size={24} className=\"text-indigo-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Setup in minutes</h4>\n                                        <p className=\"text-gray-600\">Quick and easy onboarding process</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default RegisterPage;\n"],"names":["RegisterForm","navigate","useNavigate","register","registerUser","isRegistering","isAuthenticated","useAuth","formData","setFormData","useState","email","displayName","password","confirmPassword","acceptTerms","errors","setErrors","registerSuccess","setRegisterSuccess","useEffect","replace","handleChange","field","e","prev","target","type","checked","value","jsxs","onSubmit","async","preventDefault","result","registerSchema","safeParse","success","fieldErrors","error","forEach","err","path","message","response","toast","className","children","jsx","TextField","label","onChange","startAdornment","FiUser","size","fullWidth","required","autoComplete","disabled","FiMail","FiLock","helperText","onClick","window","open","Button","variant","loading","RegisterPage","Fragment","Helmet","name","content","FiMapPin","FiCheckCircle","FiUsers","FiZap"],"mappings":"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"}
import{u as t,f as e,s,p as r,j as a,A as o,q as d,B as c,r as u}from"./firebase-BB8Fp3FL.js";import{d as i}from"./index-XwJoYhXH.js";const n=async(t,o,d)=>{try{const c=e(r(i,"hubs",t,"tasks")),u={hubId:t,title:o.title,description:o.description,createdBy:d,assignedTo:o.assignedTo,status:o.assignedTo?"assigned":"pending",weight:o.weight,deadline:o.deadline};return await a(c,{...u,createdAt:s(),updatedAt:s()}),{success:!0,data:{id:c.id,...u,createdAt:new Date,updatedAt:new Date}}}catch(c){return console.error("Create task error:",c),{success:!1,error:"Failed to create task"}}},p=async t=>{try{const e=d(r(i,"hubs",t,"tasks"),c("createdAt","desc")),s=await u(e),a=[];return s.forEach(t=>{const e=t.data();a.push({id:t.id,hubId:e.hubId,title:e.title,description:e.description,createdBy:e.createdBy,assignedTo:e.assignedTo,status:e.status,weight:e.weight,deadline:e.deadline?.toDate(),proofURL:e.proofURL,proofStatus:e.proofStatus,proofSubmittedAt:e.proofSubmittedAt?.toDate(),proofReviewedBy:e.proofReviewedBy,proofReviewedAt:e.proofReviewedAt?.toDate(),completedAt:e.completedAt?.toDate(),createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date})}),{success:!0,data:a}}catch(e){return console.error("Get hub tasks error:",e),{success:!1,error:"Failed to fetch tasks"}}},l=async(r,a,o)=>{try{return await t(e(i,"hubs",r,"tasks",a),{...o,updatedAt:s()}),{success:!0}}catch(d){return console.error("Update task error:",d),{success:!1,error:"Failed to update task"}}},h=async(t,s)=>{try{return await o(e(i,"hubs",t,"tasks",s)),{success:!0}}catch(r){return console.error("Delete task error:",r),{success:!1,error:"Failed to delete task"}}},f=async(r,a)=>{try{return await t(e(i,"hubs",r,"tasks",a),{status:"done",completedAt:s(),updatedAt:s()}),{success:!0}}catch(o){return console.error("Complete task error:",o),{success:!1,error:"Failed to complete task"}}},A=async(r,a,o,d)=>{try{return await t(e(i,"hubs",r,"tasks",a),{proofURL:o,proofStatus:"pending",proofSubmittedAt:s(),status:"submitted",updatedAt:s()}),{success:!0}}catch(c){return console.error("Submit task proof error:",c),{success:!1,error:"Failed to submit task proof"}}};export{f as a,n as c,h as d,p as g,A as s,l as u};
//# sourceMappingURL=task-api-CifnuJS5.js.map

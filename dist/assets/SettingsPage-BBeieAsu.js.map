{"version":3,"file":"SettingsPage-BBeieAsu.js","sources":["../../src/features/settings/components/FeatureTogglesSettings.tsx","../../src/features/notifications/components/NotificationSettings.tsx","../../src/features/notifications/hooks/useNotifications.ts","../../src/features/settings/pages/SettingsPage.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardHeader, CardContent } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { useHubStore } from '@/lib/store/hub-store';\nimport { useAuth } from '@/features/auth/hooks/useAuth';\nimport { updateFeatureToggles } from '@/lib/api/hub-api';\nimport { featureTogglesSchema } from '@/lib/validation/hub-schemas';\nimport type { FeatureToggles } from '@/types';\nimport toast from 'react-hot-toast';\nimport {\n    FiMapPin,\n    FiCheckSquare,\n    FiMessageCircle,\n    FiLock,\n    FiAward,\n    FiShield,\n    FiSmartphone,\n} from 'react-icons/fi';\n\nconst featureLabels: Record<keyof FeatureToggles, { label: string; description: string; icon: React.ReactNode }> = {\n    location: {\n        label: 'Location Tracking',\n        description: 'Track and share member locations',\n        icon: <FiMapPin size={20} />,\n    },\n    tasks: {\n        label: 'Tasks',\n        description: 'Assign and manage tasks',\n        icon: <FiCheckSquare size={20} />,\n    },\n    chat: {\n        label: 'Messages',\n        description: 'Group messaging and communication',\n        icon: <FiMessageCircle size={20} />,\n    },\n    vault: {\n        label: 'Vault',\n        description: 'Secure storage for sensitive information',\n        icon: <FiLock size={20} />,\n    },\n    xp: {\n        label: 'XP System',\n        description: 'Earn points for completing tasks',\n        icon: <FiAward size={20} />,\n    },\n    leaderboard: {\n        label: 'Leaderboard',\n        description: 'Rank members by XP (requires XP enabled)',\n        icon: <FiAward size={20} />,\n    },\n    geofencing: {\n        label: 'Geofencing',\n        description: 'Location-based alerts (requires location enabled)',\n        icon: <FiShield size={20} />,\n    },\n    deviceMonitoring: {\n        label: 'Device Monitoring',\n        description: 'Monitor battery and device status',\n        icon: <FiSmartphone size={20} />,\n    },\n};\n\nexport const FeatureTogglesSettings = () => {\n    const { currentHub, currentRole, featureToggles, updateFeatureToggles: updateLocalToggles } = useHubStore();\n    const { user } = useAuth();\n    const queryClient = useQueryClient();\n    const [localToggles, setLocalToggles] = useState<FeatureToggles>(\n        featureToggles || {\n            location: true,\n            tasks: true,\n            chat: true,\n            vault: false,\n            xp: true,\n            leaderboard: true,\n            geofencing: false,\n            deviceMonitoring: true,\n        }\n    );\n\n    const updateMutation = useMutation({\n        mutationFn: async (toggles: FeatureToggles) => {\n            if (!currentHub) throw new Error('No hub selected');\n            return updateFeatureToggles(currentHub.id, toggles);\n        },\n        onSuccess: () => {\n            updateLocalToggles(localToggles);\n            queryClient.invalidateQueries({ queryKey: ['hubs', user?.id] });\n            toast.success('Feature toggles updated successfully');\n        },\n        onError: (error: any) => {\n            toast.error(error.message || 'Failed to update feature toggles');\n        },\n    });\n\n    const handleToggle = (feature: keyof FeatureToggles) => {\n        const newToggles = { ...localToggles, [feature]: !localToggles[feature] };\n\n        // Validate dependencies\n        const result = featureTogglesSchema.safeParse(newToggles);\n        if (!result.success) {\n            const error = result.error.errors[0];\n            toast.error(error.message);\n            return;\n        }\n\n        setLocalToggles(newToggles);\n    };\n\n    const handleSave = () => {\n        const result = featureTogglesSchema.safeParse(localToggles);\n        if (!result.success) {\n            toast.error('Invalid feature toggle configuration');\n            return;\n        }\n        updateMutation.mutate(localToggles);\n    };\n\n    const hasChanges = JSON.stringify(localToggles) !== JSON.stringify(featureToggles);\n\n    if (!currentHub || currentRole !== 'admin') {\n        return null;\n    }\n\n    return (\n        <Card elevation={1}>\n            <CardHeader title=\"Feature Toggles\" />\n            <CardContent>\n                <p className=\"text-body-sm text-on-variant mb-6\">\n                    Enable or disable features for this hub. Some features depend on others.\n                </p>\n\n                <div className=\"space-y-4\">\n                    {(Object.keys(featureLabels) as Array<keyof FeatureToggles>).map((feature) => {\n                        const { label, description, icon } = featureLabels[feature];\n                        const isEnabled = localToggles[feature];\n                        const isDisabled =\n                            (feature === 'leaderboard' && !localToggles.xp) ||\n                            (feature === 'geofencing' && !localToggles.location);\n\n                        return (\n                            <div\n                                key={feature}\n                                className={`flex items-start justify-between p-4 rounded-lg border transition-colors ${\n                                    isDisabled && !isEnabled\n                                        ? 'bg-gray-50 border-gray-200 opacity-60'\n                                        : 'bg-white border-gray-200 hover:border-purple-300'\n                                }`}\n                            >\n                                <div className=\"flex items-start gap-3 flex-1\">\n                                    <div className={`mt-1 ${isDisabled && !isEnabled ? 'text-gray-400' : 'text-purple-600'}`}>\n                                        {icon}\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <h3 className=\"font-semibold text-gray-900\">{label}</h3>\n                                            {isDisabled && !isEnabled && (\n                                                <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded\">\n                                                    Requires dependency\n                                                </span>\n                                            )}\n                                        </div>\n                                        <p className=\"text-sm text-gray-600 mt-1\">{description}</p>\n                                    </div>\n                                </div>\n\n                                <label className=\"relative inline-flex items-center cursor-pointer ml-4\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={isEnabled}\n                                        onChange={() => handleToggle(feature)}\n                                        disabled={isDisabled && !isEnabled}\n                                        className=\"sr-only peer\"\n                                    />\n                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed\"></div>\n                                </label>\n                            </div>\n                        );\n                    })}\n                </div>\n\n                {hasChanges && (\n                    <div className=\"flex gap-3 mt-6 pt-6 border-t border-gray-200\">\n                        <Button\n                            variant=\"outlined\"\n                            onClick={() => setLocalToggles(featureToggles || localToggles)}\n                            disabled={updateMutation.isPending}\n                        >\n                            Cancel\n                        </Button>\n                        <Button\n                            variant=\"filled\"\n                            onClick={handleSave}\n                            loading={updateMutation.isPending}\n                            disabled={updateMutation.isPending}\n                        >\n                            Save Changes\n                        </Button>\n                    </div>\n                )}\n            </CardContent>\n        </Card>\n    );\n};\n\n","/**\n * NotificationSettings Component\n * \n * UI for managing notification preferences\n */\n\nimport { useState } from 'react';\nimport { FiBell, FiBellOff, FiCheckCircle, FiXCircle, FiAlertCircle } from 'react-icons/fi';\nimport { Button } from '@/components/ui/Button';\nimport { useNotifications } from '../hooks/useNotifications';\nimport { LoadingSpinner } from '@/components/LoadingSpinner';\n\nexport const NotificationSettings = () => {\n    const {\n        isSupported,\n        permissionStatus,\n        isEnabled,\n        isLoading,\n        requestPermission,\n        disableNotifications,\n    } = useNotifications();\n\n    const [showInfo, setShowInfo] = useState(false);\n\n    if (!isSupported) {\n        return (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4\">\n                <div className=\"flex items-start gap-3\">\n                    <FiAlertCircle className=\"text-yellow-600 flex-shrink-0 mt-0.5\" size={20} />\n                    <div>\n                        <h3 className=\"font-semibold text-yellow-900 mb-1\">\n                            Notifications Not Supported\n                        </h3>\n                        <p className=\"text-sm text-yellow-700\">\n                            Your browser does not support push notifications. Please use a modern browser like Chrome, Firefox, or Edge.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6 shadow-sm\">\n            <div className=\"flex items-start justify-between mb-4\">\n                <div>\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-1 flex items-center gap-2\">\n                        <FiBell size={20} className=\"text-purple-600\" />\n                        Push Notifications\n                    </h3>\n                    <p className=\"text-sm text-gray-600\">\n                        Receive real-time alerts for tasks, messages, and location updates\n                    </p>\n                </div>\n                {isEnabled ? (\n                    <div className=\"flex items-center gap-2 px-3 py-1 bg-green-50 rounded-full\">\n                        <FiCheckCircle size={16} className=\"text-green-600\" />\n                        <span className=\"text-xs font-semibold text-green-700\">Enabled</span>\n                    </div>\n                ) : (\n                    <div className=\"flex items-center gap-2 px-3 py-1 bg-gray-50 rounded-full\">\n                        <FiXCircle size={16} className=\"text-gray-400\" />\n                        <span className=\"text-xs font-semibold text-gray-600\">Disabled</span>\n                    </div>\n                )}\n            </div>\n\n            {/* Status Message */}\n            {permissionStatus === 'denied' && (\n                <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                    <div className=\"flex items-start gap-2\">\n                        <FiAlertCircle className=\"text-red-600 flex-shrink-0 mt-0.5\" size={16} />\n                        <div>\n                            <p className=\"text-sm font-medium text-red-900 mb-1\">\n                                Notifications Blocked\n                            </p>\n                            <p className=\"text-xs text-red-700\">\n                                Notifications are blocked in your browser settings. To enable them:\n                            </p>\n                            <ol className=\"text-xs text-red-700 mt-1 ml-4 list-decimal\">\n                                <li>Click the lock icon in your browser's address bar</li>\n                                <li>Find \"Notifications\" and change it to \"Allow\"</li>\n                                <li>Refresh this page</li>\n                            </ol>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n                {!isEnabled && permissionStatus !== 'denied' && (\n                    <Button\n                        variant=\"filled\"\n                        onClick={requestPermission}\n                        disabled={isLoading}\n                        loading={isLoading}\n                        startIcon={<FiBell size={18} />}\n                        className=\"flex-1\"\n                    >\n                        Enable Notifications\n                    </Button>\n                )}\n\n                {isEnabled && (\n                    <Button\n                        variant=\"outlined\"\n                        onClick={disableNotifications}\n                        disabled={isLoading}\n                        startIcon={<FiBellOff size={18} />}\n                        className=\"flex-1\"\n                    >\n                        Disable Notifications\n                    </Button>\n                )}\n\n                <button\n                    onClick={() => setShowInfo(!showInfo)}\n                    className=\"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors\"\n                >\n                    {showInfo ? 'Hide' : 'Show'} Info\n                </button>\n            </div>\n\n            {/* Info Section */}\n            {showInfo && (\n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                    <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">\n                        What notifications will you receive?\n                    </h4>\n                    <ul className=\"space-y-2 text-sm text-gray-600\">\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"text-purple-600 mt-0.5\">•</span>\n                            <span><strong>Task assignments:</strong> When a task is assigned to you</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"text-purple-600 mt-0.5\">•</span>\n                            <span><strong>Task approvals:</strong> When someone submits proof for your review</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"text-purple-600 mt-0.5\">•</span>\n                            <span><strong>New messages:</strong> When someone sends a message in your hub</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"text-purple-600 mt-0.5\">•</span>\n                            <span><strong>Geofence alerts:</strong> When family members enter or leave geofenced areas</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"text-purple-600 mt-0.5\">•</span>\n                            <span><strong>XP updates:</strong> When you earn XP or level up</span>\n                        </li>\n                    </ul>\n                </div>\n            )}\n        </div>\n    );\n};\n\n","/**\n * useNotifications Hook\n * \n * React hook for managing push notifications\n */\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/features/auth/hooks/useAuth';\nimport { notificationService } from '@/lib/services/notification-service';\n\nexport const useNotifications = () => {\n    const { user, isAuthenticated } = useAuth();\n    const [isSupported, setIsSupported] = useState(false);\n    const [permissionStatus, setPermissionStatus] = useState<NotificationPermission>('default');\n    const [isEnabled, setIsEnabled] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    useEffect(() => {\n        setIsSupported(notificationService.isSupported());\n        setPermissionStatus(notificationService.getPermissionStatus());\n        setIsEnabled(permissionStatus === 'granted');\n    }, [permissionStatus]);\n\n    useEffect(() => {\n        if (isAuthenticated && isSupported && permissionStatus === 'granted') {\n            // Set up foreground listener\n            notificationService.setupForegroundListener();\n\n            // Get token if not already set\n            notificationService.getToken().catch(console.error);\n        }\n    }, [isAuthenticated, isSupported, permissionStatus]);\n\n    const requestPermission = async (): Promise<boolean> => {\n        setIsLoading(true);\n        try {\n            const granted = await notificationService.requestPermission();\n            if (granted) {\n                setPermissionStatus('granted');\n                setIsEnabled(true);\n            } else {\n                setPermissionStatus(notificationService.getPermissionStatus());\n                setIsEnabled(false);\n            }\n            return granted;\n        } catch (error) {\n            console.error('Error requesting notification permission:', error);\n            setPermissionStatus(notificationService.getPermissionStatus());\n            setIsEnabled(false);\n            return false;\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const disableNotifications = async (): Promise<void> => {\n        setIsLoading(true);\n        try {\n            await notificationService.deleteToken();\n            setPermissionStatus(notificationService.getPermissionStatus());\n            setIsEnabled(false);\n        } catch (error) {\n            console.error('Error disabling notifications:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return {\n        isSupported,\n        permissionStatus,\n        isEnabled,\n        isLoading,\n        requestPermission,\n        disableNotifications,\n    };\n};\n\n","import { Helmet } from 'react-helmet-async';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, CardHeader, CardContent } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { useAuth } from '@/features/auth/hooks/useAuth';\nimport { useHubStore } from '@/lib/store/hub-store';\nimport { FeatureTogglesSettings } from '../components/FeatureTogglesSettings';\nimport { NotificationSettings } from '@/features/notifications/components/NotificationSettings';\nimport { FiShield, FiUser, FiEye, FiEdit2 } from 'react-icons/fi';\n\nconst SettingsPage = () => {\n    const { user } = useAuth();\n    const { currentHub, currentRole } = useHubStore();\n    const navigate = useNavigate();\n\n    return (\n        <>\n            <Helmet>\n                <title>Settings - Family Safety App</title>\n                <meta name=\"description\" content=\"Manage your app settings\" />\n            </Helmet>\n\n            <div className=\"space-y-8\">\n                <div>\n                    <h1 className=\"text-headline-lg md:text-display-sm font-normal text-on-surface mb-2\">Settings</h1>\n                    <p className=\"text-body-lg text-on-variant\">\n                        Manage your profile and preferences\n                    </p>\n                </div>\n\n                {/* Profile Settings */}\n                <Card elevation={1}>\n                    <CardHeader title=\"Profile\" />\n                    <CardContent>\n                        <div className=\"space-y-4\">\n                            <div className=\"space-y-3\">\n                                <div>\n                                    <p className=\"text-label-sm text-on-variant\">Name</p>\n                                    <p className=\"text-body-md text-on-surface\">{user?.displayName}</p>\n                                </div>\n                                <div>\n                                    <p className=\"text-label-sm text-on-variant\">Email</p>\n                                    <p className=\"text-body-md text-on-surface\">{user?.email}</p>\n                                </div>\n                                <div>\n                                    <p className=\"text-label-sm text-on-variant\">Total XP</p>\n                                    <p className=\"text-body-md text-on-surface\">{user?.xpTotal || 0}</p>\n                                </div>\n                            </div>\n                            <div className=\"pt-2 border-t border-outline-variant\">\n                                <Button\n                                    variant=\"outlined\"\n                                    onClick={() => navigate('/profile')}\n                                    startIcon={<FiEdit2 />}\n                                >\n                                    Edit Profile\n                                </Button>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n\n                {/* Hub Settings */}\n                {currentHub && (\n                    <>\n                        <Card elevation={1}>\n                            <CardHeader title=\"Current Hub\" />\n                            <CardContent>\n                                <div className=\"space-y-4\">\n                                    <div>\n                                        <p className=\"text-label-sm text-on-variant\">Hub Name</p>\n                                        <p className=\"text-body-md text-on-surface font-semibold\">{currentHub.name}</p>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-label-sm text-on-variant mb-2\">Your Role</p>\n                                        <div className=\"flex items-center gap-2\">\n                                            {currentRole === 'admin' && (\n                                                <div className=\"flex items-center gap-2 px-3 py-1.5 bg-purple-100 text-purple-700 rounded-full\">\n                                                    <FiShield size={16} />\n                                                    <span className=\"text-sm font-semibold capitalize\">Admin</span>\n                                                </div>\n                                            )}\n                                            {currentRole === 'member' && (\n                                                <div className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full\">\n                                                    <FiUser size={16} />\n                                                    <span className=\"text-sm font-semibold capitalize\">Member</span>\n                                                </div>\n                                            )}\n                                            {currentRole === 'observer' && (\n                                                <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full\">\n                                                    <FiEye size={16} />\n                                                    <span className=\"text-sm font-semibold capitalize\">Observer</span>\n                                                </div>\n                                            )}\n                                        </div>\n                                        <p className=\"text-xs text-on-variant mt-2\">\n                                            {currentRole === 'admin' && 'You can manage hub settings and members'}\n                                            {currentRole === 'member' && 'You can participate in hub activities'}\n                                            {currentRole === 'observer' && 'You have read-only access to hub content'}\n                                        </p>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-label-sm text-on-variant\">Members</p>\n                                        <p className=\"text-body-md text-on-surface\">{currentHub.members.length}</p>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        {/* Feature Toggles - Admin Only */}\n                        {currentRole === 'admin' && <FeatureTogglesSettings />}\n                    </>\n                )}\n\n                {/* Notification Settings */}\n                <NotificationSettings />\n            </div>\n        </>\n    );\n};\n\nexport default SettingsPage;\n"],"names":["featureLabels","location","label","description","icon","jsx","FiMapPin","size","tasks","FiCheckSquare","chat","FiMessageCircle","vault","FiLock","xp","FiAward","leaderboard","geofencing","FiShield","deviceMonitoring","FiSmartphone","FeatureTogglesSettings","currentHub","currentRole","featureToggles","updateFeatureToggles","updateLocalToggles","useHubStore","user","useAuth","queryClient","useQueryClient","localToggles","setLocalToggles","useState","updateMutation","useMutation","mutationFn","async","toggles","Error","id","onSuccess","invalidateQueries","queryKey","toast","success","onError","error","message","hasChanges","JSON","stringify","jsxs","Card","elevation","children","CardHeader","title","CardContent","className","Object","keys","map","feature","isEnabled","isDisabled","type","checked","onChange","newToggles","result","featureTogglesSchema","safeParse","errors","handleToggle","disabled","Button","variant","onClick","isPending","mutate","loading","NotificationSettings","isSupported","permissionStatus","isLoading","requestPermission","disableNotifications","isAuthenticated","setIsSupported","setPermissionStatus","setIsEnabled","setIsLoading","useEffect","notificationService","getPermissionStatus","setupForegroundListener","getToken","catch","console","granted","deleteToken","useNotifications","showInfo","setShowInfo","FiBell","FiCheckCircle","FiXCircle","FiAlertCircle","startIcon","FiBellOff","SettingsPage","navigate","useNavigate","Fragment","Helmet","name","content","displayName","email","xpTotal","FiEdit2","FiUser","FiEye","members","length"],"mappings":"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"}
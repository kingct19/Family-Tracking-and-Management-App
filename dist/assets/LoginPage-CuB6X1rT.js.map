{"version":3,"file":"LoginPage-CuB6X1rT.js","sources":["../../src/features/auth/components/LoginForm.tsx","../../src/features/auth/pages/LoginPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/Button';\nimport { TextField } from '@/components/ui/TextField';\nimport { useAuth } from '../hooks/useAuth';\nimport { loginSchema, type LoginFormData } from '@/lib/validation/auth-schemas';\nimport { toast } from 'react-hot-toast';\nimport { FiMail, FiLock } from 'react-icons/fi';\n\nexport const LoginForm = () => {\n    const navigate = useNavigate();\n    const { login, isLoggingIn, isAuthenticated } = useAuth();\n    const [formData, setFormData] = useState<LoginFormData>({\n        email: '',\n        password: '',\n        rememberMe: false,\n    });\n    const [errors, setErrors] = useState<Partial<Record<keyof LoginFormData, string>>>({});\n    const [loginSuccess, setLoginSuccess] = useState(false);\n\n    // Redirect when auth state updates after successful login\n    useEffect(() => {\n        if (loginSuccess && isAuthenticated) {\n            navigate('/map', { replace: true });\n            setLoginSuccess(false);\n        }\n    }, [loginSuccess, isAuthenticated, navigate]);\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setErrors({});\n\n        // Validate form data\n        const result = loginSchema.safeParse(formData);\n        if (!result.success) {\n            const fieldErrors: Partial<Record<keyof LoginFormData, string>> = {};\n            result.error.errors.forEach((err) => {\n                if (err.path[0]) {\n                    fieldErrors[err.path[0] as keyof LoginFormData] = err.message;\n                }\n            });\n            setErrors(fieldErrors);\n            return;\n        }\n\n        try {\n            const response = await login(formData);\n\n            if (response.success) {\n                toast.success('Welcome back!');\n                // Set flag to trigger redirect when auth state updates\n                setLoginSuccess(true);\n                // Auth state listener will handle the redirect via useEffect above\n            } else {\n                toast.error(response.error || 'Login failed');\n            }\n        } catch (error) {\n            toast.error('An unexpected error occurred');\n        }\n    };\n\n    const handleChange = (field: keyof LoginFormData) => (\n        e: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setFormData((prev) => ({\n            ...prev,\n            [field]: e.target.type === 'checkbox' ? e.target.checked : e.target.value,\n        }));\n\n        // Clear error for this field\n        if (errors[field]) {\n            setErrors((prev) => ({ ...prev, [field]: undefined }));\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6 w-full max-w-md\">\n            <TextField\n                type=\"email\"\n                label=\"Email\"\n                value={formData.email}\n                onChange={handleChange('email')}\n                error={errors.email}\n                startAdornment={<FiMail size={20} />}\n                fullWidth\n                required\n                autoComplete=\"email\"\n                disabled={isLoggingIn}\n            />\n\n            <TextField\n                type=\"password\"\n                label=\"Password\"\n                value={formData.password}\n                onChange={handleChange('password')}\n                error={errors.password}\n                startAdornment={<FiLock size={20} />}\n                fullWidth\n                required\n                autoComplete=\"current-password\"\n                disabled={isLoggingIn}\n            />\n\n            <div className=\"flex items-center justify-between\">\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input\n                        type=\"checkbox\"\n                        checked={formData.rememberMe}\n                        onChange={handleChange('rememberMe')}\n                        className=\"w-5 h-5 rounded border-outline text-primary focus:ring-2 focus:ring-primary\"\n                        disabled={isLoggingIn}\n                    />\n                    <span className=\"text-body-md text-on-surface\">Remember me</span>\n                </label>\n\n                <button\n                    type=\"button\"\n                    onClick={() => navigate('/forgot-password')}\n                    className=\"text-body-md text-primary hover:underline\"\n                    disabled={isLoggingIn}\n                >\n                    Forgot password?\n                </button>\n            </div>\n\n            <Button\n                type=\"submit\"\n                variant=\"filled\"\n                size=\"large\"\n                fullWidth\n                loading={isLoggingIn}\n                disabled={isLoggingIn}\n            >\n                Sign in\n            </Button>\n\n            <div className=\"text-center\">\n                <span className=\"text-body-md text-on-variant\">Don&apos;t have an account? </span>\n                <button\n                    type=\"button\"\n                    onClick={() => navigate('/register')}\n                    className=\"text-body-md text-primary hover:underline font-semibold\"\n                    disabled={isLoggingIn}\n                >\n                    Sign up\n                </button>\n            </div>\n        </form>\n    );\n};\n\n","import { Helmet } from 'react-helmet-async';\nimport { Link } from 'react-router-dom';\nimport { LoginForm } from '../components/LoginForm';\nimport { FiMapPin, FiLock, FiShield } from 'react-icons/fi';\n\nconst LoginPage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Sign In Â· HaloHub</title>\n                <meta name=\"description\" content=\"Sign in to your HaloHub account\" />\n            </Helmet>\n\n            <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center p-4\">\n                <div className=\"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center\">\n                    {/* Left side - Branding */}\n                    <div className=\"hidden lg:block\">\n                        <div className=\"space-y-6\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"w-16 h-16 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-xl\">\n                                    <FiMapPin size={32} className=\"text-white\" />\n                                </div>\n                                <h2 className=\"text-4xl font-bold text-gray-900\">HaloHub</h2>\n                            </div>\n\n                            <h3 className=\"text-3xl font-bold text-gray-900 leading-tight\">\n                                Keep your loved ones safe and connected\n                            </h3>\n\n                            <p className=\"text-xl text-gray-600\">\n                                Sign in to access real-time location tracking, task management,\n                                and secure communication for your group.\n                            </p>\n\n                            <div className=\"space-y-4 pt-6\">\n                                <div className=\"flex items-start gap-4\">\n                                    <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                                        <FiShield size={24} className=\"text-purple-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Secure & Private</h4>\n                                        <p className=\"text-gray-600\">End-to-end encryption keeps your data safe</p>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-start gap-4\">\n                                    <div className=\"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                                        <FiLock size={24} className=\"text-indigo-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Always Protected</h4>\n                                        <p className=\"text-gray-600\">24/7 monitoring and instant alerts</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Right side - Login Form */}\n                    <div className=\"w-full\">\n                        <div className=\"bg-white rounded-3xl shadow-2xl p-8 md:p-12\">\n                            {/* Mobile Logo */}\n                            <div className=\"lg:hidden flex items-center justify-center gap-3 mb-8\">\n                                <div className=\"w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center\">\n                                    <FiMapPin size={24} className=\"text-white\" />\n                                </div>\n                                <h2 className=\"text-2xl font-bold text-gray-900\">Family Safety</h2>\n                            </div>\n\n                            <div className=\"text-center mb-8\">\n                                <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-3\">\n                                    Welcome back\n                                </h1>\n                                <p className=\"text-lg text-gray-600\">\n                                    Sign in to continue to your dashboard\n                                </p>\n                            </div>\n\n                            <LoginForm />\n\n                            <div className=\"mt-8 pt-8 border-t border-gray-200\">\n                                <p className=\"text-center text-sm text-gray-500\">\n                                    Protected by enterprise-grade security\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default LoginPage;\n"],"names":["LoginForm","navigate","useNavigate","login","isLoggingIn","isAuthenticated","useAuth","formData","setFormData","useState","email","password","rememberMe","errors","setErrors","loginSuccess","setLoginSuccess","useEffect","replace","handleChange","field","e","prev","target","type","checked","value","jsxs","onSubmit","async","preventDefault","result","loginSchema","safeParse","success","fieldErrors","error","forEach","err","path","message","response","toast","className","children","jsx","TextField","label","onChange","startAdornment","FiMail","size","fullWidth","required","autoComplete","disabled","FiLock","onClick","Button","variant","loading","LoginPage","Fragment","Helmet","name","content","FiMapPin","FiShield"],"mappings":"oWASO,MAAMA,EAAY,KACrB,MAAMC,EAAWC,KACXC,MAAEA,EAAAC,YAAOA,EAAAC,gBAAaA,GAAoBC,KACzCC,EAAUC,GAAeC,WAAwB,CACpDC,MAAO,GACPC,SAAU,GACVC,YAAY,KAETC,EAAQC,GAAaL,EAAAA,SAAuD,CAAA,IAC5EM,EAAcC,GAAmBP,EAAAA,UAAS,GAGjDQ,EAAAA,UAAU,KACFF,GAAgBV,IAChBJ,EAAS,OAAQ,CAAEiB,SAAS,IAC5BF,GAAgB,KAErB,CAACD,EAAcV,EAAiBJ,IAEnC,MAiCMkB,EAAgBC,GAClBC,IAEAb,EAAac,IAAA,IACNA,EACHF,CAACA,GAA0B,aAAlBC,EAAEE,OAAOC,KAAsBH,EAAEE,OAAOE,QAAUJ,EAAEE,OAAOG,SAIpEb,EAAOO,IACPN,EAAWQ,QAAeA,EAAMF,CAACA,QAAQ,MAIjD,OACIO,EAAAA,KAAC,OAAA,CAAKC,SAhDWC,MAAOR,IACxBA,EAAES,iBACFhB,EAAU,CAAA,GAGV,MAAMiB,EAASC,EAAYC,UAAU1B,GACrC,IAAKwB,EAAOG,QAAS,CACjB,MAAMC,EAA4D,CAAA,EAOlE,OANAJ,EAAOK,MAAMvB,OAAOwB,QAASC,IACrBA,EAAIC,KAAK,KACTJ,EAAYG,EAAIC,KAAK,IAA6BD,EAAIE,gBAG9D1B,EAAUqB,EAEd,CAEA,IACI,MAAMM,QAAiBtC,EAAMI,GAEzBkC,EAASP,SACTQ,EAAMR,QAAQ,iBAEdlB,GAAgB,IAGhB0B,EAAMN,MAAMK,EAASL,OAAS,eAEtC,OAASA,GACLM,EAAMN,MAAM,+BAChB,GAkB8BO,UAAU,4BACpCC,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACGtB,KAAK,QACLuB,MAAM,QACNrB,MAAOnB,EAASG,MAChBsC,SAAU7B,EAAa,SACvBiB,MAAOvB,EAAOH,MACduC,eAAgBJ,EAAAA,IAACK,EAAA,CAAOC,KAAM,KAC9BC,WAAS,EACTC,UAAQ,EACRC,aAAa,QACbC,SAAUnD,IAGdyC,EAAAA,IAACC,EAAA,CACGtB,KAAK,WACLuB,MAAM,WACNrB,MAAOnB,EAASI,SAChBqC,SAAU7B,EAAa,YACvBiB,MAAOvB,EAAOF,SACdsC,eAAgBJ,EAAAA,IAACW,EAAA,CAAOL,KAAM,KAC9BC,WAAS,EACTC,UAAQ,EACRC,aAAa,mBACbC,SAAUnD,IAGduB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,oCACXC,SAAA,CAAAjB,EAAAA,KAAC,QAAA,CAAMgB,UAAU,yCACbC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACGrB,KAAK,WACLC,QAASlB,EAASK,WAClBoC,SAAU7B,EAAa,cACvBwB,UAAU,8EACVY,SAAUnD,IAEdyC,EAAAA,IAAC,OAAA,CAAKF,UAAU,+BAA+BC,SAAA,mBAGnDC,EAAAA,IAAC,SAAA,CACGrB,KAAK,SACLiC,QAAS,IAAMxD,EAAS,oBACxB0C,UAAU,4CACVY,SAAUnD,EACbwC,SAAA,wBAKLC,EAAAA,IAACa,EAAA,CACGlC,KAAK,SACLmC,QAAQ,SACRR,KAAK,QACLC,WAAS,EACTQ,QAASxD,EACTmD,SAAUnD,EACbwC,SAAA,YAIDjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,cACXC,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAKF,UAAU,+BAA+BC,SAAA,4BAC/CC,EAAAA,IAAC,SAAA,CACGrB,KAAK,SACLiC,QAAS,IAAMxD,EAAS,aACxB0C,UAAU,0DACVY,SAAUnD,EACbwC,SAAA,mBC1IXiB,EAAY,IAEVlC,EAAAA,KAAAmC,WAAA,CACIlB,SAAA,CAAAjB,OAACoC,EAAA,CACGnB,SAAA,CAAAC,EAAAA,IAAC,SAAMD,SAAA,sBACPC,EAAAA,IAAC,OAAA,CAAKmB,KAAK,cAAcC,QAAQ,6CAGpC,MAAA,CAAItB,UAAU,4GACXC,SAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,sEAEXC,SAAA,CAAAC,EAAAA,IAAC,OAAIF,UAAU,kBACXC,SAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,YACXC,SAAA,CAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,0BACXC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAIF,UAAU,mHACXC,SAAAC,EAAAA,IAACqB,GAASf,KAAM,GAAIR,UAAU,iBAElCE,EAAAA,IAAC,KAAA,CAAGF,UAAU,mCAAmCC,SAAA,eAGrDC,EAAAA,IAAC,KAAA,CAAGF,UAAU,iDAAiDC,SAAA,4CAI/DC,EAAAA,IAAC,IAAA,CAAEF,UAAU,wBAAwBC,SAAA,6GAKrCjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,iBACXC,SAAA,CAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,yBACXC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAIF,UAAU,oFACXC,SAAAC,EAAAA,IAACsB,GAAShB,KAAM,GAAIR,UAAU,6BAEjC,MAAA,CACGC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,mCAAmCC,SAAA,qBACjDC,EAAAA,IAAC,IAAA,CAAEF,UAAU,gBAAgBC,SAAA,qDAGrCjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,yBACXC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAIF,UAAU,oFACXC,SAAAC,EAAAA,IAACW,GAAOL,KAAM,GAAIR,UAAU,6BAE/B,MAAA,CACGC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,mCAAmCC,SAAA,qBACjDC,EAAAA,IAAC,IAAA,CAAEF,UAAU,gBAAgBC,SAAA,2DAQhD,MAAA,CAAID,UAAU,SACXC,SAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,8CAEXC,SAAA,CAAAjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,wDACXC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAIF,UAAU,wGACXC,SAAAC,EAAAA,IAACqB,GAASf,KAAM,GAAIR,UAAU,iBAElCE,EAAAA,IAAC,KAAA,CAAGF,UAAU,mCAAmCC,SAAA,qBAGrDjB,EAAAA,KAAC,MAAA,CAAIgB,UAAU,mBACXC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,oDAAoDC,SAAA,iBAGlEC,EAAAA,IAAC,IAAA,CAAEF,UAAU,wBAAwBC,SAAA,mDAKxC5C,EAAA,IAED6C,EAAAA,IAAC,OAAIF,UAAU,qCACXC,eAAC,IAAA,CAAED,UAAU,oCAAoCC,SAAA"}
{"version":3,"file":"LeaderboardPage-CTtQAzNT.js","sources":["../../src/features/xp/pages/LeaderboardPage.tsx"],"sourcesContent":["import { Helmet } from 'react-helmet-async';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/Card';\nimport { LoadingSpinner } from '@/components/LoadingSpinner';\nimport { LeaderboardSkeleton } from '@/components/ui/Skeleton';\nimport { useHubStore } from '@/lib/store/hub-store';\nimport { getLeaderboard } from '@/features/xp/api/xp-api';\nimport { FiAward, FiTrendingUp } from 'react-icons/fi';\n\nconst LeaderboardPage = () => {\n    const { currentHub } = useHubStore();\n\n    const { data: leaderboard, isLoading } = useQuery({\n        queryKey: ['leaderboard', currentHub?.id],\n        queryFn: async () => {\n            if (!currentHub) throw new Error('No hub selected');\n            const response = await getLeaderboard(currentHub.id);\n            if (!response.success) throw new Error(response.error);\n            // Transform API response to match LeaderboardEntry type\n            return (response.data || []).map((entry) => ({\n                userId: entry.userId,\n                displayName: entry.userName,\n                xpTotal: entry.totalXP,\n                rank: entry.rank,\n                streak: 0, // TODO: Calculate streak\n                photoURL: (entry as any).photoURL, // Optional photo URL\n            }));\n        },\n        enabled: !!currentHub,\n    });\n\n    return (\n        <>\n            <Helmet>\n                <title>Leaderboard - Family Safety App</title>\n                <meta name=\"description\" content=\"View XP leaderboard for your hub\" />\n            </Helmet>\n\n            <div className=\"space-y-8\">\n                <div>\n                    <h1 className=\"text-headline-lg md:text-display-sm font-normal text-on-surface mb-2\">Leaderboard</h1>\n                    <p className=\"text-body-lg text-on-variant\">\n                        Top performers in {currentHub?.name || 'your hub'}\n                    </p>\n                </div>\n\n                {isLoading ? (\n                    <LeaderboardSkeleton />\n                ) : !leaderboard || leaderboard.length === 0 ? (\n                    <div className=\"card p-12 text-center\">\n                        <div className=\"w-20 h-20 bg-primary-container rounded-full flex items-center justify-center mx-auto mb-6 shadow-elevation-2\">\n                            <FiAward size={40} className=\"text-primary\" />\n                        </div>\n                        <h3 className=\"text-headline-md font-normal text-on-surface mb-3\">\n                            No rankings yet\n                        </h3>\n                        <p className=\"text-body-lg text-on-variant max-w-md mx-auto\">\n                            Complete tasks to earn XP and appear on the leaderboard!\n                        </p>\n                    </div>\n                ) : (\n                    <div className=\"space-y-3\">\n                        {leaderboard.map((entry, index) => {\n                            const getRankIcon = (rank: number) => {\n                                if (rank === 1) return <FiAward className=\"text-yellow-500\" size={24} />;\n                                if (rank === 2) return <FiAward className=\"text-gray-400\" size={24} />;\n                                if (rank === 3) return <FiAward className=\"text-orange-500\" size={24} />;\n                                return <span className=\"text-gray-500 font-bold text-lg\">#{rank}</span>;\n                            };\n\n                            const getRankBg = (rank: number) => {\n                                if (rank === 1) return 'bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-200';\n                                if (rank === 2) return 'bg-gradient-to-r from-gray-50 to-gray-100 border-gray-200';\n                                if (rank === 3) return 'bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200';\n                                return 'bg-white border-gray-200';\n                            };\n\n                            return (\n                                <div\n                                    key={entry.userId}\n                                    className={`card p-5 border-2 transition-all duration-normal hover:shadow-elevation-3 ${\n                                        index < 3 ? 'shadow-elevation-2' : ''\n                                    } ${getRankBg(entry.rank)}`}\n                                >\n                                    <div className=\"flex items-center gap-4\">\n                                        {/* Rank */}\n                                        <div className=\"flex-shrink-0 w-12 flex items-center justify-center\">\n                                            {getRankIcon(entry.rank)}\n                                        </div>\n\n                                        {/* Avatar */}\n                                        <div className=\"flex-shrink-0\">\n                                            {entry.photoURL ? (\n                                                <img\n                                                    src={entry.photoURL}\n                                                    alt={entry.displayName}\n                                                    className=\"w-12 h-12 rounded-full border-2 border-white shadow-elevation-2\"\n                                                />\n                                            ) : (\n                                                <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-indigo-600 flex items-center justify-center text-on-primary font-semibold text-title-md border-2 border-white shadow-elevation-2\">\n                                                    {entry.displayName.charAt(0).toUpperCase()}\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* Name and Stats */}\n                                        <div className=\"flex-1 min-w-0\">\n                                            <h3 className=\"text-title-md text-on-surface truncate mb-1\">\n                                                {entry.displayName}\n                                            </h3>\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"flex items-center gap-1.5 text-primary\">\n                                                    <FiAward size={16} />\n                                                    <span className=\"text-label-md font-semibold\">{entry.xpTotal} XP</span>\n                                                </div>\n                                                {entry.streak > 0 && (\n                                                    <div className=\"flex items-center gap-1.5 text-orange-600\">\n                                                        <FiTrendingUp size={16} />\n                                                        <span className=\"text-label-sm\">{entry.streak} day streak</span>\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n\n                                        {/* XP Badge */}\n                                        <div className=\"flex-shrink-0\">\n                                            <div className=\"px-4 py-2 bg-primary text-on-primary rounded-full text-label-md font-semibold shadow-elevation-2\">\n                                                {entry.xpTotal}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default LeaderboardPage;\n\n"],"names":["LeaderboardPage","currentHub","useHubStore","data","leaderboard","isLoading","useQuery","queryKey","id","queryFn","async","Error","response","getLeaderboard","success","error","map","entry","userId","displayName","userName","xpTotal","totalXP","rank","streak","photoURL","enabled","jsxs","Fragment","children","Helmet","jsx","name","content","className","LeaderboardSkeleton","length","index","FiAward","size","getRankIcon","src","alt","charAt","toUpperCase","FiTrendingUp"],"mappings":"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"}